<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="file:///home/kdflint" />
<title>guidestar_local</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">guidestar_local</td></tr>
</thead><tbody>
<!--Base URL: http://localhost/nexus/pilot/guidestar/selenium_me/  -->
<!--Log To: /home/kdflint/screen-scraper_basic/resource/db/scraping/selenium_out.log-->
<tr>
	<td>store</td>
	<td>1</td>
	<td>fileIterate</td>
</tr>
<tr>
	<td>store</td>
	<td>1457478634</td>
	<td>subDir</td>
</tr>
<tr>
	<td>store</td>
	<td>362</td>
	<td>numFilesToProcess</td>
</tr>
<tr>
	<td>store</td>
	<td>1</td>
	<td>internalCode</td>
</tr>
<tr>
	<td>while</td>
	<td>${fileIterate} &lt;= ${numFilesToProcess}</td>
	<td></td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;none&quot;</td>
	<td>keywords</td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;none&quot;</td>
	<td>ein</td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;none&quot;</td>
	<td>orgname</td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;EIN&quot;</td>
	<td>einMarker</td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;Contact&quot;</td>
	<td>contactMarker</td>
</tr>
<tr>
	<td>storeEval</td>
	<td>&quot;Cause Area (NTEE Code)&quot;</td>
	<td>codeMarker</td>
</tr>
<tr>
	<td>open</td>
	<td>${subDir}/${fileIterate}.html</td>
	<td></td>
</tr>
<!--=== Create the base PROSPECT row ===-->
<tr>
	<td>storeElementPresent</td>
	<td>id=keyword</td>
	<td>keywordPresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>${keywordPresent}</td>
	<td>echoKeyword</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeKeyword</td>
	<td></td>
</tr>
<tr>
	<td>storeElementPresent</td>
	<td>//*[@id=&quot;profileHeader&quot;]/div/h1</td>
	<td>orgnamePresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>${orgnamePresent}</td>
	<td>echoOrgname</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeOrgname</td>
	<td></td>
</tr>
<tr>
	<td>echo</td>
	<td>INSERT INTO PROSPECTS (id, keywords, name, create_dttm) values (${subDir}${fileIterate}, ~@~${keywords}~@~, ~@~${orgname}~@~, now());</td>
	<td></td>
</tr>
<!--=== Iterate through the possible sections in div[4] and react to the content as appropriate ===-->
<tr>
	<td>store</td>
	<td>1</td>
	<td>sectionIterate</td>
</tr>
<tr>
	<td>while</td>
	<td>${sectionIterate} &lt;= 6</td>
	<td></td>
</tr>
<tr>
	<td>storeElementPresent</td>
	<td>//*[@id=&quot;summary&quot;]/div[4]/section[${sectionIterate}]/p[1]</td>
	<td>sectionPresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>!${sectionPresent}</td>
	<td>resumeSectionIteration</td>
</tr>
<tr>
	<td>storeText</td>
	<td>//*[@id=&quot;summary&quot;]/div[4]/section[${sectionIterate}]/p[1]</td>
	<td>marker</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>'${marker}'=='${einMarker}'</td>
	<td>echoEin</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>'${marker}'=='${contactMarker}'</td>
	<td>echoContact</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>'${marker}'=='${codeMarker}'</td>
	<td>echoCodes</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeSectionIteration</td>
	<td></td>
</tr>
<tr>
	<td>storeEval</td>
	<td>${sectionIterate}+1</td>
	<td>sectionIterate</td>
</tr>
<tr>
	<td>endWhile</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>endLoop</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>echoEin</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>//*[@id=&quot;summary&quot;]/div[4]/section[${sectionIterate}]/p[2]</td>
	<td>einValue</td>
</tr>
<tr>
	<td>echo</td>
	<td>UPDATE PROSPECTS SET ein = ~@~${einValue}~@~ where id = ${subDir}${fileIterate};</td>
	<td></td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>resumeSectionIteration</td>
	<td></td>
</tr>
<!--=== Following assumes we know that Contact <p> 2-4 will be predictable ===-->
<tr>
	<td>label</td>
	<td>echoContact</td>
	<td></td>
</tr>
<tr>
	<td>storeElementPresent</td>
	<td>//div[@id='summary']/div[4]/section[${sectionIterate}]/p[2]</td>
	<td>indexPresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>${indexPresent}</td>
	<td>echoNameValue</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeContactAtEmail</td>
	<td></td>
</tr>
<tr>
	<td>storeElementPresent</td>
	<td>//div[@id='summary']/div[4]/section[${sectionIterate}]/p[3]</td>
	<td>indexPresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>${indexPresent}</td>
	<td>echoEmailValue</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeContactAtTitle</td>
	<td></td>
</tr>
<tr>
	<td>storeElementPresent</td>
	<td>//div[@id='summary']/div[4]/section[${sectionIterate}]/p[4]</td>
	<td>indexPresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>${indexPresent}</td>
	<td>echoTitleValue</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeContactAtTel</td>
	<td></td>
</tr>
<tr>
	<td>storeElementPresent</td>
	<td>//div[@id='summary']/div[4]/section[${sectionIterate}]/p[5]</td>
	<td>indexPresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>${indexPresent}</td>
	<td>echoTelValue</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeContactAtUrl</td>
	<td></td>
</tr>
<tr>
	<td>storeElementPresent</td>
	<td>//div[@id='summary']/div[4]/section[${sectionIterate}]/p[6]</td>
	<td>indexPresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>${indexPresent}</td>
	<td>echoUrlValue</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeContactAtDone</td>
	<td></td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>resumeSectionIteration</td>
	<td></td>
</tr>
<!--=== NTEE Codes ===-->
<tr>
	<td>label</td>
	<td>echoCodes</td>
	<td></td>
</tr>
<tr>
	<td>store</td>
	<td>2</td>
	<td>codeIterate</td>
</tr>
<tr>
	<td>while</td>
	<td>${codeIterate} &lt;= 5</td>
	<td></td>
</tr>
<tr>
	<td>storeElementPresent</td>
	<td>//*[@id=&quot;summary&quot;]/div[4]/section[${sectionIterate}]/p[${codeIterate}]</td>
	<td>indexPresent</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>${indexPresent}</td>
	<td>echoCodeValue</td>
</tr>
<tr>
	<td>label</td>
	<td>resumeCodeLoop</td>
	<td></td>
</tr>
<tr>
	<td>storeEval</td>
	<td>${codeIterate}+1</td>
	<td>codeIterate</td>
</tr>
<tr>
	<td>endWhile</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>resumeSectionIteration</td>
	<td></td>
</tr>
<!--=== Branches called after various elements are verified present ===-->
<tr>
	<td>label</td>
	<td>echoKeyword</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>id=keyword</td>
	<td>keywords</td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>resumeKeyword</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>echoOrgname</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>//*[@id=&quot;profileHeader&quot;]/div/h1</td>
	<td>orgname</td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>resumeOrgname</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>echoNameValue</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>//*[@id=&quot;summary&quot;]/div[4]/section[${sectionIterate}]/p[2]</td>
	<td>nameValue</td>
</tr>
<tr>
	<td>echo</td>
	<td>UPDATE PROSPECTS SET internal_code = ${internalCode} where id = ${subDir}${fileIterate};</td>
	<td></td>
</tr>
<tr>
	<td>echo</td>
	<td>UPDATE PROSPECTS SET cname = ~@~${nameValue}~@~ where id = ${subDir}${fileIterate};</td>
	<td></td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>resumeContactAtEmail</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>echoEmailValue</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>//*[@id=&quot;summary&quot;]/div[4]/section[${sectionIterate}]/p[3]</td>
	<td>emailValue</td>
</tr>
<tr>
	<td>echo</td>
	<td>UPDATE&nbsp;&nbsp;PROSPECTS SET cemail = ~@~${emailValue}~@~ where id = ${subDir}${fileIterate};</td>
	<td></td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>resumeContactAtTitle</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>echoTitleValue</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>//div[@id='summary']/div[4]/section[${sectionIterate}]/p[4]</td>
	<td>titleValue</td>
</tr>
<!--removed echo UPDATE PROSPECTS SET ctitle = ~@~${titleValue}~@~ where id = ${subDir}${fileIterate};-->
<tr>
	<td>gotoLabel</td>
	<td>resumeContactAtTel</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>echoTelValue</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>//div[@id='summary']/div[4]/section[${sectionIterate}]/p[5]</td>
	<td>telValue</td>
</tr>
<tr>
	<td>storeEval</td>
	<td>'${telValue}'.contains(&quot;Tel&quot;)</td>
	<td>isTel</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>'${isTel}'=='true'</td>
	<td>resumeContactAtUrl</td>
</tr>
<!--removed echo UPDATE PROSPECTS SET url = ~@~${telValue}~@~ where id = ${subDir}${fileIterate};-->
<tr>
	<td>gotoLabel</td>
	<td>resumeContactAtDone</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>echoUrlValue</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>//div[@id='summary']/div[4]/section[${sectionIterate}]/p[6]</td>
	<td>urlValue</td>
</tr>
<!--removed echo UPDATE PROSPECTS SET url = ~@~${urlValue}~@~ where id = ${subDir}${fileIterate};-->
<tr>
	<td>gotoLabel</td>
	<td>resumeContactAtDone</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>echoCodeValue</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>//*[@id=&quot;summary&quot;]/div[4]/section[${sectionIterate}]/p[${codeIterate}]</td>
	<td>codeValue</td>
</tr>
<tr>
	<td>echo</td>
	<td>INSERT INTO PROSPECTS_CODE (prospect_fk, ntee_code) values (${subDir}${fileIterate}, ~@~${codeValue}~@~);</td>
	<td></td>
</tr>
<tr>
	<td>gotoLabel</td>
	<td>resumeCodeLoop</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>endLoop</td>
	<td></td>
</tr>
<tr>
	<td>storeEval</td>
	<td>${fileIterate}+1</td>
	<td>fileIterate</td>
</tr>
<tr>
	<td>endWhile</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>endScript</td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>
